From 804476548872a9999b4a56b01b94140ac13b97e8 Mon Sep 17 00:00:00 2001
From: Lukas Voegl <lvoegl@tdt.de>
Date: Mon, 9 Oct 2023 10:57:46 +0200
Subject: [PATCH] swanmon: add package

Signed-off-by: Lukas Voegl <lvoegl@tdt.de>
---
 utils/swanmon/Makefile | 44 ++++++++++++++++++++++++++++++++++++++++++
 utils/swanmon/test.sh  |  3 +++
 2 files changed, 47 insertions(+)
 create mode 100644 utils/swanmon/Makefile
 create mode 100644 utils/swanmon/test.sh

diff --git a/feeds/packages/utils/swanmon/Makefile b/feeds/packages/utils/swanmon/Makefile
new file mode 100644
index 0000000000000..a0bbb1b51fc04
--- /dev/null
+++ b/feeds/packages/utils/swanmon/Makefile
@@ -0,0 +1,44 @@
+#
+# Copyright (C) 2023 TDT AG <development@tdt.de>
+#
+# This is free software, licensed under the GNU General Public License v2.
+# See https://www.gnu.org/licenses/gpl-2.0.txt for more information.
+#
+
+include $(TOPDIR)/rules.mk
+
+PKG_NAME:=swanmon
+PKG_VERSION:=0.1
+PKG_RELEASE:=1
+
+PKG_SOURCE_PROTO:=git
+PKG_SOURCE_URL:=https://github.com/TDT-AG/swanmon
+PKG_SOURCE_VERSION:=296096e172005cae855c316f859265aba8b2e472
+PKG_MIRROR_HASH:=96b9c988cae8e2c34dc8b483e32b3c619fd3a027be33ece80c93972ab437e10a
+
+PKG_MAINTAINER:=Lukas Voegl <lvoegl@tdt.de>
+PKG_LICENSE:=LGPL-2.1-or-later
+PKG_LICENSE_FILES:=LICENSE
+
+PKG_BUILD_PARALLEL:=1
+
+include $(INCLUDE_DIR)/package.mk
+include $(INCLUDE_DIR)/cmake.mk
+
+define Package/swanmon
+  SECTION:=utils
+  CATEGORY:=Utilities
+  TITLE:=strongSwan monitoring tool
+  DEPENDS:=+davici +glib2 +libjson-c
+endef
+
+define Package/swanmon/description
+  A command-line utility for serializing the strongSwan VICI output to JSON.
+endef
+
+define Package/swanmon/install
+	$(INSTALL_DIR) $(1)/usr/sbin
+	$(INSTALL_BIN) $(PKG_INSTALL_DIR)/usr/sbin/swanmon $(1)/usr/sbin/
+endef
+
+$(eval $(call BuildPackage,swanmon))
diff --git a/feeds/packages/utils/swanmon/test.sh b/feeds/packages/utils/swanmon/test.sh
new file mode 100644
index 0000000000000..e2f737ffc6593
--- /dev/null
+++ b/feeds/packages/utils/swanmon/test.sh
@@ -0,0 +1,3 @@
+#!/bin/sh
+
+swanmon help
